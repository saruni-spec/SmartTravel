{% extends 'base.html' %}
{% block title %}
<h2>Receipt</h2>
{% endblock %}
{% block content %}

<form class="data">
<label for="">Thank you :</label>
<p class="output">{{user_name}}</p>
<label for="">For:</label>
<p class="output">{{service}}</p>
<label for="">Vehicle</label>
<p class="output">{{vehicle}}</p>
<label for="">On :</label>
<p class="output">{{on}}</p>
<label for="">At :</label>
<p class="output">{{at}}</p>
<label for="">From :</label>
<p class="output">{{pickup}}</p>
<label for=""> To :</label>
<p class="output">{{destination}}</p>
<label for="">You paid :</label>
<p class="output">{{amount}}</p>

</form>
<button onclick="downloadPDF()">Download</button>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
<script>
    function downloadPDF() {
var data = document.getElementsByClassName('data'); // get all elements with class='data'
var doc = new jsPDF();
for (var i = 0; i < data.length; i++) { // loop through each element
  if (i > 0) {
    doc.addPage(); // add a new page for each element after the first one
  }
  doc.fromHTML(data[i].innerHTML, 15, 15); // add the element's content to the PDF
}
var currentURL = window.location.href; // get the current URL
  var title = currentURL.split('/').pop(); // extract the last part of the URL as the title
  var otherTitle='SmartTravel'
  doc.save(otherTitle +'-' +'-receipt' + '.pdf');// save the PDF file
}

    </script>
{% endblock %}h