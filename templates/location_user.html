{% extends 'base.html' %}
{% block title %}
user map
{% endblock %}
{% block content %}

  <div id="map"></div>

  <script>
    // Function to initialize the map
    function initMap() {
      // Create a new map instance
      var map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: -1.2833, lng: 36.8167}, // Set initial map center position
        zoom: 12 // Set initial zoom level
        
      });

      // Get user's current location
      if (navigator.geolocation) {
        navigator.geolocation.watchPosition(function(position) {
          var userLatLng = {
            lat: position.coords.latitude,
            lng: position.coords.longitude
          };
          console.log('init')
          // Add a marker for the user's location
          var marker = new google.maps.Marker({
            position: userLatLng,
            map: map,
            title: 'User Location'
          });

          // Center the map on the user's location
          map.setCenter(userLatLng);
        }, function() {
          // Handle location retrieval error
          console.log('Error: The Geolocation service failed.');
        });
      } else {
        // Browser doesn't support Geolocation
        console.log('Error: Your browser doesn\'t support geolocation.');
      }
    }

    // Call the initMap function when the page has finished loading
    window.onload = initMap;
  </script>
{% endblock %}
